# è‡ªç”¨æ¨¡æ¿ï¼Œå·²æµ‹è¯•å¦‚ä¸‹è½¯ä»¶
# https://github.com/echs-top/proxy/blob/main/ä»£ç†è½¯ä»¶.md



## TUN ä¸ºäº†é€‚é…boxå•ç‹¬æå‡ºæ¥äº† ##
tun: 
  # include-uid: []
  enable: true
  device: meta
  stack: mixed
  dns-hijack: ["any:53","tcp://any:53"]
  mtu: 9000
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true
  strict-route: true
  udp-timeout: 600



## é”šç‚¹ ##
direct-dns: &direct-dns ["quic://dns.alidns.com#DIRECT","https://https://doh.pub/dns-query#DIRECT&h3=false"]
proxy-dns: &proxy-dns ["https://dns.google/dns-query#PROXY&h3=true","https://cloudflare-dns.com/dns-query#PROXY&h3=true"]
providers: &providers { type: http, interval: 86400, proxy: DIRECT, header: { User-Agent: ["clash-verge/v2.3.2"] }, health-check: { enable: true, url: 'https://www.google.com/generate_204', interval: 7200, timeout: 5000, max-failed-times: 3, lazy: true }, override: { udp: true, tfo: true, mptcp: true, ip-version: ipv6-prefer } }
zdxz: &zdxz { type: select, proxies: [ğŸ‡­ğŸ‡°é¦™æ¸¯,ğŸ‡¹ğŸ‡¼å°æ¹¾,ğŸ‡¯ğŸ‡µæ—¥æœ¬,ğŸ‡¸ğŸ‡¬æ–°åŠ å¡,ğŸ‡ºğŸ‡¸ç¾å›½,ğŸ‡©ğŸ‡ªå¾·å›½,ğŸ‡¬ğŸ‡§è‹±å›½,ğŸ‡«ğŸ‡·æ³•å›½,ğŸ‡³ğŸ‡±è·å…°,ğŸ‡¹ğŸ‡·åœŸè€³å…¶,ğŸ‡·ğŸ‡ºä¿„ç½—æ–¯,ğŸ‡¨ğŸ‡¦åŠ æ‹¿å¤§], lazy: true, icon: https://raw.githubusercontent.com/lige47/QuanX-icon-rule/main/icon/dpdp.png }
fzjh: &fzjh { type: select, proxies: [ğŸ‡­ğŸ‡°é¦™æ¸¯âº,ğŸ‡¹ğŸ‡¼å°æ¹¾âº,ğŸ‡¯ğŸ‡µæ—¥æœ¬âº,ğŸ‡¸ğŸ‡¬æ–°åŠ å¡âº,ğŸ‡ºğŸ‡¸ç¾å›½âº,ğŸ‡©ğŸ‡ªå¾·å›½âº,ğŸ‡¬ğŸ‡§è‹±å›½âº,ğŸ‡«ğŸ‡·æ³•å›½âº,ğŸ‡³ğŸ‡±è·å…°âº,ğŸ‡¹ğŸ‡·åœŸè€³å…¶âº,ğŸ‡·ğŸ‡ºä¿„ç½—æ–¯âº,ğŸ‡¨ğŸ‡¦åŠ æ‹¿å¤§âº], lazy: true, icon: https://raw.githubusercontent.com/lige47/QuanX-icon-rule/main/icon/lightning(5).png }
sdxz: &sdxz { type: select, include-all-providers: true, lazy: true, icon: https://raw.githubusercontent.com/lige47/QuanX-icon-rule/main/icon/direct(1).png }
zl: &zl { type: select, proxies: [DIRECT,PROXY,è‡ªåŠ¨é€‰æ‹©Â¹,è‡ªåŠ¨é€‰æ‹©Â²,è´Ÿè½½å‡è¡¡Â¹,è´Ÿè½½å‡è¡¡Â²,æ‰‹åŠ¨é€‰æ‹©Â¹,æ‰‹åŠ¨é€‰æ‹©Â²,æ•…éšœè½¬ç§»] }
dl: &dl { type: select, proxies: [PROXY,DIRECT,è‡ªåŠ¨é€‰æ‹©Â¹,è‡ªåŠ¨é€‰æ‹©Â²,è´Ÿè½½å‡è¡¡Â¹,è´Ÿè½½å‡è¡¡Â²,æ‰‹åŠ¨é€‰æ‹©Â¹,æ‰‹åŠ¨é€‰æ‹©Â²,æ•…éšœè½¬ç§»] }
auto: &auto { type: url-test, include-all-providers: true, tolerance: 20, lazy: true, hidden: true }
bal: &bal { type: load-balance, include-all-providers: true, strategy: round-robin, lazy: true, hidden: true }
ip: &ip { type: http, interval: 86400, behavior: ipcidr, format: yaml, proxy: PROXY }
domain: &domain { type: http, interval: 86400, behavior: domain, format: yaml, proxy: PROXY }



## è®¾ç½® ##
mixed-port: 7890
redir-port: 9797
tproxy-port: 9898
mode: rule
ipv6: true
allow-lan: true
bind-address: "*"
log-level: silent
unified-delay: true
tcp-concurrent: true
disable-keep-alive: true
find-process-mode: always
global-client-fingerprint: chrome
etag-support: true
external-controller: 0.0.0.0:9090
# å»ºè®®è®¾ç½®å¯†ç ï¼Œä¸å»ºè®®ä¸ºç©º
secret: ""
external-ui: ./dashboard
external-ui-url: https://github.com/Zephyruso/zashboard/releases/latest/download/dist.zip
experimental: { quic-go-disable-gso: false, quic-go-disable-ecn: true, dialer-ip4p-convert: false }
profile: { store-selected: true, store-fake-ip: false }
hosts: { dns.google: ['8.8.8.8','8.8.4.4','2001:4860:4860::8888','2001:4860:4860::8844'], zns.lehu.in: [47.76.113.103], dns.alidns.com: ['223.5.5.5','223.6.6.6','2400:3200::1','2400:3200:baba::1'], doh.pub: ['119.29.29.29','2402:4e00::'], cloudflare-dns.com: ['1.1.1.1','1.0.0.1','2606:4700:4700::1111','2606:4700:4700::1001'], mtalk.google.com: ['2404:6800:4008:c1b::bc','2404:6800:4008:c01::bc','2404:6800:4008:c07::bc','2404:6800:4008:c15::bc','108.177.125.188','142.251.170.188'], mtalk4.google.com: [mtalk.google.com], mtalk-dev.google.com: [mtalk.google.com], mtalk-staging.google.com: [mtalk.google.com], alt1-mtalk.google.com: [mtalk.google.com], alt2-mtalk.google.com: [mtalk.google.com], alt3-mtalk.google.com: [mtalk.google.com], alt4-mtalk.google.com: [mtalk.google.com], alt5-mtalk.google.com: [mtalk.google.com], alt6-mtalk.google.com: [mtalk.google.com], alt7-mtalk.google.com: [mtalk.google.com], alt8-mtalk.google.com: [mtalk.google.com] }
dns: { enable: true, cache-algorithm: arc, listen: 0.0.0.0:1053, ipv6: true, prefer-h3: true, use-hosts: true, use-system-hosts: false, respect-rules: false, enhanced-mode: fake-ip, fake-ip-range: 28.0.0.1/8, fake-ip-filter-mode: whitelist, default-nameserver: [223.5.5.5,119.29.29.29], proxy-server-nameserver: *direct-dns, nameserver: *proxy-dns,direct-nameserver: *direct-dns, direct-nameserver-follow-policy: true, nameserver-policy: { 'rule-set:private': [system], 'rule-set:ads': ['rcode://success'] } }
sniffer: { enable: true, force-dns-mapping: true, parse-pure-ip: true, override-destination: true, sniff: { HTTP: { ports: [80, 8080-8880], override-destination: true }, TLS: { ports: [443, 8443] }, QUIC: { ports: [443, 8443] } },skip-domain: ["RULE-SET:private"], skip-src-address: ["RULE-SET:private_ip"] }
# tun: { enable: true, device: meta, stack: mixed, dns-hijack: ["any:53","tcp://any:53"], mtu: 9000, auto-route: true, auto-redirect: true, auto-detect-interface: true, strict-route: true, udp-timeout: 600 }



## è®¢é˜… ##
proxy-providers:
  link: { <<: *providers, url: "è®¢é˜…é“¾æ¥", path: ./providers/link1.yaml }
  # link2: { <<: *providers, url: "è®¢é˜…é“¾æ¥", path: ./providers/link2.yaml }
proxies: [ {name: DNSåŠ«æŒ, type: dns} ]
proxy-groups:
  - { name: PROXY, type: select, proxies: [è‡ªåŠ¨é€‰æ‹©Â¹,è‡ªåŠ¨é€‰æ‹©Â²,è´Ÿè½½å‡è¡¡Â¹,è´Ÿè½½å‡è¡¡Â²,æ‰‹åŠ¨é€‰æ‹©Â¹,æ‰‹åŠ¨é€‰æ‹©Â²,æ•…éšœè½¬ç§»,DIRECT], icon: https://raw.githubusercontent.com/lige47/QuanX-icon-rule/main/icon/mihomo.png }
  - { name: è‡ªåŠ¨é€‰æ‹©Â¹, <<: *zdxz }
  - { name: è‡ªåŠ¨é€‰æ‹©Â², <<: *zdxz }
  # - { name: è‡ªåŠ¨é€‰æ‹©Â³, <<: *zdxz }
  # - { name: è‡ªåŠ¨é€‰æ‹©â´, <<: *zdxz }
  - { name: è´Ÿè½½å‡è¡¡Â¹, <<: *fzjh }
  - { name: è´Ÿè½½å‡è¡¡Â², <<: *fzjh }
  # - { name: è´Ÿè½½å‡è¡¡Â³, <<: *fzjh }
  # - { name: è´Ÿè½½å‡è¡¡â´, <<: *fzjh }
  - { name: æ‰‹åŠ¨é€‰æ‹©Â¹, <<: *sdxz }
  - { name: æ‰‹åŠ¨é€‰æ‹©Â², <<: *sdxz }
  #- { name: æ‰‹åŠ¨é€‰æ‹©Â³, <<: *sdxz }
  #- { name: æ‰‹åŠ¨é€‰æ‹©â´, <<: *sdxz }
  - { name: FCMæ¨é€, <<: *zl, icon: https://raw.githubusercontent.com/lige47/QuanX-icon-rule/main/icon/google.png }
  - { name: å¹¿å‘Šæ‹¦æˆª, type: select, proxies: [REJECT,REJECT-DROP], icon: https://raw.githubusercontent.com/lige47/QuanX-icon-rule/main/icon/ad(7).png }
  - { name: ONEDRIVEä¸‹è½½, <<: *zl, icon: https://raw.githubusercontent.com/lige47/QuanX-icon-rule/main/icon/OneDrive.png }
  - { name: STEAMä¸‹è½½, <<: *zl, icon: https://raw.githubusercontent.com/lige47/QuanX-icon-rule/main/icon/steam(1).png }
  - { name: TELEGRAM, <<: *dl, icon: https://raw.githubusercontent.com/lige47/QuanX-icon-rule/main/icon/telegram(1).png }
  - { name: GITHUB, <<: *dl, icon: https://raw.githubusercontent.com/lige47/QuanX-icon-rule/main/icon/github(1).png }
  - { name: CLOUDFLARE, <<: *dl, icon: https://raw.githubusercontent.com/lige47/QuanX-icon-rule/main/icon/chinaunicomcloud.png }
  - { name: æ•…éšœè½¬ç§», type: fallback, include-all-providers: true, exclude-filter: "ğŸ‡¦ğŸ‡¶|æµé‡|åˆ°æœŸ|é‡ç½®", lazy: true, hidden: true }
  - { name: ğŸ‡­ğŸ‡°é¦™æ¸¯, <<: *auto, filter: "ğŸ‡­ğŸ‡°|é¦™æ¸¯" }
  - { name: ğŸ‡¹ğŸ‡¼å°æ¹¾, <<: *auto, filter: "ğŸ‡¹ğŸ‡¼|å°æ¹¾" }
  - { name: ğŸ‡¯ğŸ‡µæ—¥æœ¬, <<: *auto, filter: "ğŸ‡¯ğŸ‡µ|æ—¥æœ¬" }
  - { name: ğŸ‡¸ğŸ‡¬æ–°åŠ å¡, <<: *auto, filter: "ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡" }
  - { name: ğŸ‡ºğŸ‡¸ç¾å›½, <<: *auto, filter: "ğŸ‡ºğŸ‡¸|ç¾å›½" }
  - { name: ğŸ‡©ğŸ‡ªå¾·å›½, <<: *auto, filter: "ğŸ‡©ğŸ‡ª|å¾·å›½" }
  - { name: ğŸ‡¬ğŸ‡§è‹±å›½, <<: *auto, filter: "ğŸ‡¬ğŸ‡§|è‹±å›½" }
  - { name: ğŸ‡«ğŸ‡·æ³•å›½, <<: *auto, filter: "ğŸ‡«ğŸ‡·|æ³•å›½" }
  - { name: ğŸ‡³ğŸ‡±è·å…°, <<: *auto, filter: "ğŸ‡³ğŸ‡±|è·å…°" }
  - { name: ğŸ‡¹ğŸ‡·åœŸè€³å…¶, <<: *auto, filter: "ğŸ‡¹ğŸ‡·|åœŸè€³å…¶" }
  - { name: ğŸ‡·ğŸ‡ºä¿„ç½—æ–¯, <<: *auto, filter: "ğŸ‡·ğŸ‡º|ä¿„ç½—æ–¯" }
  - { name: ğŸ‡¨ğŸ‡¦åŠ æ‹¿å¤§, <<: *auto, filter: "ğŸ‡¨ğŸ‡¦|åŠ æ‹¿å¤§" }
  - { name: ğŸ‡­ğŸ‡°é¦™æ¸¯âº, <<: *bal, filter: "ğŸ‡­ğŸ‡°|é¦™æ¸¯" }
  - { name: ğŸ‡¹ğŸ‡¼å°æ¹¾âº, <<: *bal, filter: "ğŸ‡¹ğŸ‡¼|å°æ¹¾" }
  - { name: ğŸ‡¯ğŸ‡µæ—¥æœ¬âº, <<: *bal, filter: "ğŸ‡¯ğŸ‡µ|æ—¥æœ¬" }
  - { name: ğŸ‡¸ğŸ‡¬æ–°åŠ å¡âº, <<: *bal, filter: "ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡" }
  - { name: ğŸ‡ºğŸ‡¸ç¾å›½âº, <<: *bal, filter: "ğŸ‡ºğŸ‡¸|ç¾å›½" }
  - { name: ğŸ‡©ğŸ‡ªå¾·å›½âº, <<: *bal, filter: "ğŸ‡©ğŸ‡ª|å¾·å›½" }
  - { name: ğŸ‡¬ğŸ‡§è‹±å›½âº, <<: *bal, filter: "ğŸ‡¬ğŸ‡§|è‹±å›½" }
  - { name: ğŸ‡«ğŸ‡·æ³•å›½âº, <<: *bal, filter: "ğŸ‡«ğŸ‡·|æ³•å›½" }
  - { name: ğŸ‡³ğŸ‡±è·å…°âº, <<: *bal, filter: "ğŸ‡³ğŸ‡±|è·å…°" }
  - { name: ğŸ‡¹ğŸ‡·åœŸè€³å…¶âº, <<: *bal, filter: "ğŸ‡¹ğŸ‡·|åœŸè€³å…¶" }
  - { name: ğŸ‡·ğŸ‡ºä¿„ç½—æ–¯âº, <<: *bal, filter: "ğŸ‡·ğŸ‡º|ä¿„ç½—æ–¯" }
  - { name: ğŸ‡¨ğŸ‡¦åŠ æ‹¿å¤§âº, <<: *bal, filter: "ğŸ‡¨ğŸ‡¦|åŠ æ‹¿å¤§" }



## è§„åˆ™ ##
rules:
  - RULE-SET,ads,å¹¿å‘Šæ‹¦æˆª
  - DST-PORT,53,DNSåŠ«æŒ
  - OR,((RULE-SET,private),(RULE-SET,private_ip,no-resolve)),DIRECT
  - OR,((DOMAIN,dns.alidns.com),(DOMAIN,doh.pub),(DOMAIN,zns.lehu.in),(IP-CIDR,47.76.113.103/24,no-resolve),(IP-CIDR,223.5.5.5/24,no-resolve),(IP-CIDR,223.6.6.6/24,no-resolve),(IP-CIDR,119.29.29.29/24,no-resolve),(IP-CIDR6,2402:4e00::/32,no-resolve),(IP-CIDR6,2400:3200:baba::1/32,no-resolve),(IP-CIDR6,2400:3200::1/32,no-resolve)),DIRECT
  - OR,((DOMAIN,dns.google),(DOMAIN,cloudflare-dns.com),(IP-CIDR,8.8.8.8/24,no-resolve),(IP-CIDR,8.8.4.4/24,no-resolve),(IP-CIDR,1.1.1.1/24,no-resolve),(IP-CIDR,1.0.0.1/24,no-resolve),(IP-CIDR6,2001:4860:4860::8888/32,no-resolve),(IP-CIDR6,2001:4860:4860::8844/32,no-resolve),(IP-CIDR6,2606:4700:4700::1001/32,no-resolve),(IP-CIDR6,2606:4700:4700::1111/32,no-resolve)),PROXY
  # è‡ªç”¨è¡¥å……
  - DOMAIN,services.googleapis.cn,PROXY
  - DOMAIN-SUFFIX,echs.top,DIRECT
  - DOMAIN-SUFFIX,808yun.cn,DIRECT
  - IP-CIDR,154.201.76.158/24,DIRECT,no-resolve
  # åˆ†æµè§„åˆ™
  - OR,((DST-PORT,5228),(DOMAIN-REGEX,alt*-mtalk.google.com),(DOMAIN,mtalk4.google.com),(DOMAIN,mtalk-dev.google.com),(DOMAIN,mtalk-staging.google.com),(IP-CIDR6,2404:6800:4008:c1b::bc/32,no-resolve),(IP-CIDR6,2404:6800:4008:c07::bc/32,no-resolve),(IP-CIDR6,2404:6800:4008:c01::bc/32,no-resolve),(IP-CIDR6,2404:6800:4008:c15::bc/32,no-resolve),(IP-CIDR,108.177.125.188/24,no-resolve),(IP-CIDR,142.251.170.188/24,no-resolve)),FCMæ¨é€
  - OR,((DOMAIN-SUFFIX,sharepoint.com),(DOMAIN-SUFFIX,sharepoint.cn)),ONEDRIVEä¸‹è½½
  - OR,((DOMAIN,steamcdn-a.akamaihd.net),(DOMAIN-SUFFIX,steamserver.net)),STEAMä¸‹è½½
  - OR,((RULE-SET,telegram),(RULE-SET,telegram_ip,no-resolve)),TELEGRAM
  - RULE-SET,github,GITHUB
  - OR,((RULE-SET,cloudflare),(RULE-SET,cloudflare_ip,no-resolve)),CLOUDFLARE
  - RULE-SET,bilibili,DIRECT
  - RULE-SET,gfw,PROXY
  - OR,((RULE-SET,cn),(RULE-SET,cn_ip,no-resolve)),DIRECT
  - RULE-SET,hk_ip,DIRECT
  - MATCH,PROXY
rule-providers:
  ads: { <<: *domain, url: "https://raw.githubusercontent.com/TG-Twilight/AWAvenue-Ads-Rule/main/Filters/AWAvenue-Ads-Rule-Clash.yaml", path: ./rules/ads.yaml }
  private: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.yaml", path: ./rules/private.yaml }
  telegram: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.yaml", path: ./rules/telegram.yaml }
  github: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.yaml", path: ./rules/github.yaml }
  cloudflare: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cloudflare.yaml", path: ./rules/cloudflare.yaml }
  bilibili: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/bilibili.yaml", path: ./rules/bilibili.yaml }
  gfw: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/gfw.yaml", path: ./rules/gfw.yaml }
  cn: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.yaml", path: ./rules/cn.yaml }
  private_ip: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/private.yaml", path: ./rules/private_ip.yaml }
  cloudflare_ip: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cloudflare.yaml", path: ./rules/cloudflare_ip.yaml }
  telegram_ip: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/telegram.yaml", path: ./rules/telegram_ip.yaml }
  cn_ip: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.yaml", path: ./rules/cn_ip.yaml }
  hk_ip: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/hk.yaml", path: ./rules/hk_ip.yaml }
